# PTrade API å®ç°çŠ¶å†µåˆ†æ

## å½“å‰å®ç°çŠ¶å†µæ€»ç»“

### å·²å®ç°API (22ä¸ªæ ¸å¿ƒAPI)

#### äº¤æ˜“ç›¸å…³å‡½æ•° (7ä¸ª)
- âœ… **order()** - æŒ‰æ•°é‡ä¹°å–
- âœ… **order_value()** - æŒ‰ä»·å€¼ä¹°å–
- âœ… **cancel_order()** - æ’¤å•
- âœ… **get_position()** - è·å–æŒä»“ä¿¡æ¯
- âœ… **get_positions()** - è·å–å¤šæ”¯è‚¡ç¥¨æŒä»“ä¿¡æ¯
- âœ… **get_open_orders()** - è·å–æœªå®Œæˆè®¢å•
- âœ… **get_order()** - è·å–æŒ‡å®šè®¢å•
- âœ… **get_orders()** - è·å–å…¨éƒ¨è®¢å•
- âœ… **get_trades()** - è·å–å½“æ—¥æˆäº¤è®¢å•

#### æ•°æ®è·å–å‡½æ•° (3ä¸ª)
- âœ… **get_history()** - è·å–å†å²è¡Œæƒ…æ•°æ®
- âœ… **get_price()** - è·å–ä»·æ ¼æ•°æ®
- âœ… **get_snapshot()** - è·å–è¡Œæƒ…å¿«ç…§

#### è®¾ç½®å‡½æ•° (2ä¸ª)
- âœ… **set_universe()** - è®¾ç½®è‚¡ç¥¨æ± 
- âœ… **set_benchmark()** - è®¾ç½®åŸºå‡†

#### è®¡ç®—å‡½æ•° (4ä¸ª)
- âœ… **get_MACD()** - å¼‚åŒç§»åŠ¨å¹³å‡çº¿
- âœ… **get_KDJ()** - éšæœºæŒ‡æ ‡
- âœ… **get_RSI()** - ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡
- âœ… **get_CCI()** - é¡ºåŠ¿æŒ‡æ ‡

#### å·¥å…·å‡½æ•° (2ä¸ª)
- âœ… **log()** - æ—¥å¿—è®°å½•
- âœ… **check_limit()** - ä»£ç æ¶¨è·ŒåœçŠ¶æ€åˆ¤æ–­

#### æ¡†æ¶å‡½æ•° (4ä¸ª)
- âœ… **handle_data()** - æ•°æ®å¤„ç†
- âœ… **is_mode_supported()** - æ¨¡å¼æ”¯æŒæ£€æŸ¥
- âœ… **validate_and_execute()** - éªŒè¯å¹¶æ‰§è¡ŒAPIè°ƒç”¨
- âœ… **_simulate_order_execution()** - æ¨¡æ‹Ÿè®¢å•æ‰§è¡Œ

---

## ç¼ºå¤±çš„é‡è¦APIåˆ†æ

### ğŸ”´ é«˜ä¼˜å…ˆçº§ç¼ºå¤±API (20ä¸ª)

#### 1. æ ¸å¿ƒäº¤æ˜“API (8ä¸ª)
- âŒ **order_target()** - æŒ‡å®šç›®æ ‡æ•°é‡ä¹°å–
- âŒ **order_target_value()** - æŒ‡å®šæŒä»“å¸‚å€¼ä¹°å–
- âŒ **order_market()** - æŒ‰å¸‚ä»·è¿›è¡Œå§”æ‰˜
- âŒ **cancel_order_ex()** - æ’¤å•æ‰©å±•
- âŒ **get_all_orders()** - è·å–è´¦æˆ·å½“æ—¥å…¨éƒ¨è®¢å•
- âŒ **ipo_stocks_order()** - æ–°è‚¡ä¸€é”®ç”³è´­
- âŒ **after_trading_order()** - ç›˜åå›ºå®šä»·å§”æ‰˜
- âŒ **after_trading_cancel_order()** - ç›˜åå›ºå®šä»·å§”æ‰˜æ’¤å•

#### 2. æ ¸å¿ƒè®¾ç½®API (7ä¸ª)
- âŒ **set_commission()** - è®¾ç½®ä½£é‡‘è´¹ç‡
- âŒ **set_fixed_slippage()** - è®¾ç½®å›ºå®šæ»‘ç‚¹
- âŒ **set_slippage()** - è®¾ç½®æ»‘ç‚¹
- âŒ **set_volume_ratio()** - è®¾ç½®æˆäº¤æ¯”ä¾‹
- âŒ **set_limit_mode()** - è®¾ç½®å›æµ‹æˆäº¤æ•°é‡é™åˆ¶æ¨¡å¼
- âŒ **set_yesterday_position()** - è®¾ç½®åº•ä»“
- âŒ **set_parameters()** - è®¾ç½®ç­–ç•¥é…ç½®å‚æ•°

#### 3. æ ¸å¿ƒæ•°æ®è·å–API (5ä¸ª)
- âŒ **get_trading_day()** - è·å–äº¤æ˜“æ—¥æœŸ
- âŒ **get_all_trades_days()** - è·å–å…¨éƒ¨äº¤æ˜“æ—¥æœŸ
- âŒ **get_trade_days()** - è·å–æŒ‡å®šèŒƒå›´äº¤æ˜“æ—¥æœŸ
- âŒ **get_stock_info()** - è·å–è‚¡ç¥¨åŸºç¡€ä¿¡æ¯
- âŒ **get_fundamentals()** - è·å–è´¢åŠ¡æ•°æ®ä¿¡æ¯

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ç¼ºå¤±API (25ä¸ª)

#### 1. è‚¡ç¥¨ä¿¡æ¯è·å–API (9ä¸ª)
- âŒ **get_stock_name()** - è·å–è‚¡ç¥¨åç§°
- âŒ **get_stock_status()** - è·å–è‚¡ç¥¨çŠ¶æ€ä¿¡æ¯
- âŒ **get_stock_exrights()** - è·å–è‚¡ç¥¨é™¤æƒé™¤æ¯ä¿¡æ¯
- âŒ **get_stock_blocks()** - è·å–è‚¡ç¥¨æ‰€å±æ¿å—ä¿¡æ¯
- âŒ **get_index_stocks()** - è·å–æŒ‡æ•°æˆä»½è‚¡
- âŒ **get_industry_stocks()** - è·å–è¡Œä¸šæˆä»½è‚¡
- âŒ **get_Ashares()** - è·å–æŒ‡å®šæ—¥æœŸAè‚¡ä»£ç åˆ—è¡¨
- âŒ **get_etf_list()** - è·å–ETFä»£ç 
- âŒ **get_ipo_stocks()** - è·å–å½“æ—¥IPOç”³è´­æ ‡çš„

#### 2. å®æ—¶è¡Œæƒ…API (8ä¸ª)
- âŒ **get_individual_entrust()** - è·å–é€ç¬”å§”æ‰˜è¡Œæƒ…
- âŒ **get_individual_transaction()** - è·å–é€ç¬”æˆäº¤è¡Œæƒ…
- âŒ **get_tick_direction()** - è·å–åˆ†æ—¶æˆäº¤è¡Œæƒ…
- âŒ **get_sort_msg()** - è·å–æ¿å—ã€è¡Œä¸šçš„æ¶¨å¹…æ’å
- âŒ **get_etf_info()** - è·å–ETFä¿¡æ¯
- âŒ **get_etf_stock_info()** - è·å–ETFæˆåˆ†åˆ¸ä¿¡æ¯
- âŒ **get_gear_price()** - è·å–æŒ‡å®šä»£ç çš„æ¡£ä½è¡Œæƒ…ä»·æ ¼
- âŒ **get_cb_info()** - è·å–å¯è½¬å€ºåŸºç¡€ä¿¡æ¯

#### 3. å®šæ—¶å’Œå›è°ƒAPI (5ä¸ª)
- âŒ **run_daily()** - æŒ‰æ—¥å‘¨æœŸå¤„ç†
- âŒ **run_interval()** - æŒ‰è®¾å®šå‘¨æœŸå¤„ç†
- âŒ **tick_data()** - tickçº§åˆ«å¤„ç†
- âŒ **on_order_response()** - å§”æ‰˜å›æŠ¥
- âŒ **on_trade_response()** - æˆäº¤å›æŠ¥

#### 4. å…¶ä»–å·¥å…·API (3ä¸ª)
- âŒ **is_trade()** - ä¸šåŠ¡ä»£ç åœºæ™¯åˆ¤æ–­
- âŒ **get_user_name()** - è·å–ç™»å½•ç»ˆç«¯çš„èµ„é‡‘è´¦å·
- âŒ **permission_test()** - æƒé™æ ¡éªŒ

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ç¼ºå¤±API (100+ä¸ª)

#### 1. èèµ„èåˆ¸API (19ä¸ª)
- âŒ **margin_trade()** - æ‹…ä¿å“ä¹°å–
- âŒ **margincash_open()** - èèµ„ä¹°å…¥
- âŒ **margincash_close()** - å–åˆ¸è¿˜æ¬¾
- âŒ **margincash_direct_refund()** - ç›´æ¥è¿˜æ¬¾
- âŒ **marginsec_open()** - èåˆ¸å–å‡º
- âŒ **marginsec_close()** - ä¹°åˆ¸è¿˜åˆ¸
- âŒ **marginsec_direct_refund()** - ç›´æ¥è¿˜åˆ¸
- âŒ **get_margincash_stocks()** - è·å–èèµ„æ ‡çš„åˆ—è¡¨
- âŒ **get_marginsec_stocks()** - è·å–èåˆ¸æ ‡çš„åˆ—è¡¨
- âŒ **get_margin_contract()** - åˆçº¦æŸ¥è¯¢
- âŒ **get_margin_contractreal()** - å®æ—¶åˆçº¦æŸ¥è¯¢
- âŒ **get_margin_assert()** - ä¿¡ç”¨èµ„äº§æŸ¥è¯¢
- âŒ **get_assure_security_list()** - æ‹…ä¿åˆ¸æŸ¥è¯¢
- âŒ **get_margincash_open_amount()** - èèµ„æ ‡çš„æœ€å¤§å¯ä¹°æ•°é‡æŸ¥è¯¢
- âŒ **get_margincash_close_amount()** - å–åˆ¸è¿˜æ¬¾æ ‡çš„æœ€å¤§å¯å–æ•°é‡æŸ¥è¯¢
- âŒ **get_marginsec_open_amount()** - èåˆ¸æ ‡çš„æœ€å¤§å¯å–æ•°é‡æŸ¥è¯¢
- âŒ **get_marginsec_close_amount()** - ä¹°åˆ¸è¿˜åˆ¸æ ‡çš„æœ€å¤§å¯ä¹°æ•°é‡æŸ¥è¯¢
- âŒ **get_margin_entrans_amount()** - ç°åˆ¸è¿˜åˆ¸æ•°é‡æŸ¥è¯¢
- âŒ **get_enslo_security_info()** - èåˆ¸å¤´å¯¸ä¿¡æ¯æŸ¥è¯¢

#### 2. æœŸè´§API (7ä¸ª)
- âŒ **buy_open()** - å¼€å¤š
- âŒ **sell_close()** - å¤šå¹³
- âŒ **sell_open()** - ç©ºå¼€
- âŒ **buy_close()** - ç©ºå¹³
- âŒ **get_margin_rate()** - è·å–ç”¨æˆ·è®¾ç½®çš„ä¿è¯é‡‘æ¯”ä¾‹
- âŒ **get_instruments()** - è·å–åˆçº¦ä¿¡æ¯
- âŒ **set_future_commission()** - è®¾ç½®æœŸè´§æ‰‹ç»­è´¹

#### 3. æœŸæƒAPI (15ä¸ª)
- âŒ **get_opt_objects()** - è·å–æœŸæƒæ ‡çš„åˆ—è¡¨
- âŒ **get_opt_last_dates()** - è·å–æœŸæƒæ ‡çš„åˆ°æœŸæ—¥åˆ—è¡¨
- âŒ **get_opt_contracts()** - è·å–æœŸæƒæ ‡çš„å¯¹åº”åˆçº¦åˆ—è¡¨
- âŒ **get_contract_info()** - è·å–æœŸæƒåˆçº¦ä¿¡æ¯
- âŒ **get_covered_lock_amount()** - è·å–æœŸæƒæ ‡çš„å¯å¤‡å…‘é”å®šæ•°é‡
- âŒ **get_covered_unlock_amount()** - è·å–æœŸæƒæ ‡çš„å…è®¸å¤‡å…‘è§£é”æ•°é‡
- âŒ **buy_open()** - æƒåˆ©ä»“å¼€ä»“
- âŒ **sell_close()** - æƒåˆ©ä»“å¹³ä»“
- âŒ **sell_open()** - ä¹‰åŠ¡ä»“å¼€ä»“
- âŒ **buy_close()** - ä¹‰åŠ¡ä»“å¹³ä»“
- âŒ **open_prepared()** - å¤‡å…‘å¼€ä»“
- âŒ **close_prepared()** - å¤‡å…‘å¹³ä»“
- âŒ **option_exercise()** - è¡Œæƒ
- âŒ **option_covered_lock()** - æœŸæƒæ ‡çš„å¤‡å…‘é”å®š
- âŒ **option_covered_unlock()** - æœŸæƒæ ‡çš„å¤‡å…‘è§£é”

#### 4. é«˜çº§äº¤æ˜“API (10ä¸ª)
- âŒ **order_tick()** - tickè¡Œæƒ…è§¦å‘ä¹°å–
- âŒ **debt_to_stock_order()** - å€ºè½¬è‚¡å§”æ‰˜
- âŒ **etf_basket_order()** - ETFæˆåˆ†åˆ¸ç¯®å­ä¸‹å•
- âŒ **etf_purchase_redemption()** - ETFåŸºé‡‘ç”³èµæ¥å£
- âŒ **get_etf_stock_list()** - è·å–ETFæˆåˆ†åˆ¸åˆ—è¡¨
- âŒ **get_market_list()** - è·å–å¸‚åœºåˆ—è¡¨
- âŒ **get_market_detail()** - è·å–å¸‚åœºè¯¦ç»†ä¿¡æ¯
- âŒ **get_cb_list()** - è·å–å¯è½¬å€ºå¸‚åœºä»£ç è¡¨
- âŒ **get_deliver()** - è·å–å†å²äº¤å‰²å•ä¿¡æ¯
- âŒ **get_fundjour()** - è·å–å†å²èµ„é‡‘æµæ°´ä¿¡æ¯

#### 5. å…¶ä»–ä¸“ä¸šAPI (20+ä¸ª)
- âŒ **get_trades_file()** - è·å–å¯¹è´¦æ•°æ®æ–‡ä»¶
- âŒ **convert_position_from_csv()** - è·å–è®¾ç½®åº•ä»“çš„å‚æ•°åˆ—è¡¨
- âŒ **get_research_path()** - è·å–ç ”ç©¶è·¯å¾„
- âŒ **get_trade_name()** - è·å–äº¤æ˜“åç§°
- âŒ **send_email()** - å‘é€é‚®ç®±ä¿¡æ¯
- âŒ **send_qywx()** - å‘é€ä¼ä¸šå¾®ä¿¡ä¿¡æ¯
- âŒ **create_dir()** - åˆ›å»ºæ–‡ä»¶è·¯å¾„
- âŒ å…¶ä»–ä¸“ä¸šAPI...

---

## å®ç°å®Œæˆåº¦ç»Ÿè®¡

| ç±»åˆ« | å·²å®ç° | åº”å®ç° | å®Œæˆåº¦ |
|------|--------|--------|--------|
| **æ ¸å¿ƒäº¤æ˜“API** | 9/17 | 17 | 53% |
| **æ•°æ®è·å–API** | 3/53 | 53 | 6% |
| **è®¾ç½®å‡½æ•°API** | 2/12 | 12 | 17% |
| **è®¡ç®—å‡½æ•°API** | 4/4 | 4 | 100% |
| **å·¥å…·å‡½æ•°API** | 2/7 | 7 | 29% |
| **æ¡†æ¶å‡½æ•°API** | 4/7 | 7 | 57% |
| **èèµ„èåˆ¸API** | 0/19 | 19 | 0% |
| **æœŸè´§API** | 0/7 | 7 | 0% |
| **æœŸæƒAPI** | 0/15 | 15 | 0% |
| **é«˜çº§äº¤æ˜“API** | 0/10 | 10 | 0% |
| **å…¶ä»–ä¸“ä¸šAPI** | 0/20+ | 20+ | 0% |

### æ€»ä½“å®Œæˆåº¦
- **å·²å®ç°**: 24ä¸ªæ ¸å¿ƒAPI
- **åº”å®ç°**: 150+ä¸ªAPI
- **å®Œæˆåº¦**: ~16%

---

## å»ºè®®å®æ–½ä¼˜å…ˆçº§

### ğŸš€ Phase 1: æ ¸å¿ƒåŠŸèƒ½å®Œå–„ (ç«‹å³å®æ–½)
1. **order_target()** - ç›®æ ‡æ•°é‡äº¤æ˜“
2. **order_target_value()** - ç›®æ ‡ä»·å€¼äº¤æ˜“
3. **set_commission()** - è®¾ç½®ä½£é‡‘è´¹ç‡
4. **set_slippage()** - è®¾ç½®æ»‘ç‚¹
5. **get_trading_day()** - è·å–äº¤æ˜“æ—¥æœŸ
6. **get_stock_info()** - è·å–è‚¡ç¥¨åŸºç¡€ä¿¡æ¯
7. **get_fundamentals()** - è·å–è´¢åŠ¡æ•°æ®
8. **run_daily()** - æŒ‰æ—¥å‘¨æœŸå¤„ç†

### ğŸ¯ Phase 2: å®æ—¶äº¤æ˜“æ”¯æŒ (çŸ­æœŸè§„åˆ’)
1. **tick_data()** - tickçº§åˆ«å¤„ç†
2. **on_order_response()** - å§”æ‰˜å›æŠ¥
3. **on_trade_response()** - æˆäº¤å›æŠ¥
4. **get_individual_entrust()** - è·å–é€ç¬”å§”æ‰˜è¡Œæƒ…
5. **get_individual_transaction()** - è·å–é€ç¬”æˆäº¤è¡Œæƒ…
6. **order_market()** - æŒ‰å¸‚ä»·è¿›è¡Œå§”æ‰˜
7. **get_all_orders()** - è·å–è´¦æˆ·å½“æ—¥å…¨éƒ¨è®¢å•
8. **is_trade()** - ä¸šåŠ¡ä»£ç åœºæ™¯åˆ¤æ–­

### ğŸ”§ Phase 3: ä¸“ä¸šäº¤æ˜“æ”¯æŒ (ä¸­æœŸè§„åˆ’)
1. **èèµ„èåˆ¸API** - ä¸¤èäº¤æ˜“æ”¯æŒ
2. **æœŸè´§API** - æœŸè´§äº¤æ˜“æ”¯æŒ
3. **æœŸæƒAPI** - æœŸæƒäº¤æ˜“æ”¯æŒ
4. **é«˜çº§äº¤æ˜“API** - ETFã€å¯è½¬å€ºç­‰é«˜çº§äº¤æ˜“
5. **å®æ—¶è¡Œæƒ…API** - å®Œæ•´çš„å®æ—¶è¡Œæƒ…æ”¯æŒ

### ğŸ“Š Phase 4: å®Œæ•´ç”Ÿæ€æ”¯æŒ (é•¿æœŸè§„åˆ’)
1. **é€šçŸ¥API** - é‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡é€šçŸ¥
2. **æ–‡ä»¶æ“ä½œAPI** - å¯¹è´¦æ–‡ä»¶ã€åº•ä»“æ–‡ä»¶
3. **æƒé™ç®¡ç†API** - ç”¨æˆ·æƒé™å’Œæ ¡éªŒ
4. **å…¶ä»–ä¸“ä¸šAPI** - å®Œæ•´çš„ä¸“ä¸šäº¤æ˜“æ”¯æŒ

---

## å®ç°å»ºè®®

### 1. æ¶æ„ä¼˜åŒ–å»ºè®®
- ä¿æŒå½“å‰çš„æ¨¡å¼æ„ŸçŸ¥è·¯ç”±å™¨è®¾è®¡
- ä¸ºä¸åŒäº¤æ˜“ç±»å‹(è‚¡ç¥¨/æœŸè´§/æœŸæƒ)åˆ›å»ºä¸“ç”¨è·¯ç”±å™¨
- å®ç°æ’ä»¶åŒ–çš„APIæ‰©å±•æœºåˆ¶

### 2. ä»£ç è´¨é‡å»ºè®®
- åŠ å¼ºç±»å‹æç¤ºå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- å®ç°å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–
- æ·»åŠ æ€§èƒ½ç›‘æ§å’Œé”™è¯¯å¤„ç†

### 3. å…¼å®¹æ€§å»ºè®®
- ä¸¥æ ¼éµå¾ªPTradeå®˜æ–¹APIè§„èŒƒ
- å®ç°æ¸è¿›å¼APIæ”¯æŒï¼Œä¿è¯å‘åå…¼å®¹
- æä¾›APIç‰ˆæœ¬ç®¡ç†æœºåˆ¶

å½“å‰çš„å®ç°å·²ç»è¦†ç›–äº†æœ€æ ¸å¿ƒçš„äº¤æ˜“åŠŸèƒ½ï¼Œä½†è·ç¦»å®Œæ•´çš„PTrade APIå…¼å®¹è¿˜æœ‰è¾ƒå¤§å·®è·ã€‚å»ºè®®æŒ‰ç…§ä¼˜å…ˆçº§åˆ†é˜¶æ®µå®æ–½ï¼Œä¼˜å…ˆå®Œå–„æ ¸å¿ƒäº¤æ˜“å’Œæ•°æ®è·å–åŠŸèƒ½ã€‚